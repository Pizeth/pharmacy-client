<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        background: #0c0d0f;
      }
      #container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 5vmin;
        height: 85vmin; /* Dynamic height */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      #wrapper {
        position: relative;
        aspect-ratio: 1 / 1;
        border-radius: 50%;
        font-size: 75vmin;

        height: 85%;
        background: transparent;
        /* overflow: hidden; */
        --size-factor: 90;
        will-change: transform;
        transform: translate3d(0, 0, 0);
        backface-visibility: hidden;

        ::after {
          content: "";
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          border-radius: 50%;
          pointer-events: none;
          z-index: 10;
          box-shadow:
            /* 1. Outer Atmosphere (Halo) */
            0 0 0.05em -0.01em rgb(70, 89, 181, 0.5),
            /* softer sky-blue halo */ 0 0 0.08em 0.02em
              rgba(135, 206, 255, 0.3),
            /* 2. Sunlit Surface Highlight (Left) */ inset 0.02em 0
              0.04em -0.01em rgb(61, 76, 169, 0.7),
            /* 3. Rayleigh Scattering (Mid-Atmosphere) */ inset 0.04em 0 0.09em
              0px rgb(60, 75, 170, 0.5),
            /* 4. The Terminator (Shadow Start) */ inset -0.04em 0 0.15em 0px
              rgba(0, 0, 0, 0.5),
            /* 5. Deep Space Night (Far Right) */ inset -0.1em 0 0.12em 0.04em
              rgba(0, 0, 0, 0.7);
        }
      }
      #glow,
      #globeMap {
        position: absolute;
      }
      #scl {
        transition: 1s;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <div id="wrapper">
        <svg viewBox="0 0 100 100" width="100%" height="100%" id="glow">
          <filter id="blur" x="-100%" y="-100%" width="300%" height="300%">
            <feGaussianBlur in="SourceGraphic" stdDeviation="5" />
          </filter>
          <filter id="turb" x="-100%" y="-100%" width="300%" height="300%">
            <feTurbulence
              type="turbulence"
              baseFrequency="0.05"
              numOctaves="102.5"
              result="turbulence"
              seed="75"
            />
            <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="5">
              <animate
                attributeName="scale"
                values="5;9;2;5"
                dur="5s"
                begin="0s"
                repeatCount="indefinite"
              />
            </feDisplacementMap>
          </filter>
          <circle
            cx="50"
            cy="50"
            r="50"
            fill="rgb(20, 24, 87, 0.25)"
            filter="url(#blur) url(#turb)"
          ></circle>
        </svg>
        <svg
          viewBox="0 0 100 100"
          width="100%"
          height="100%"
          xmlns="http://www.w3.org/2000/svg"
          id="globeMap"
        >
          <filter
            id="displacementFilter"
            filterUnits="userSpaceOnUse"
            height="120"
            width="120"
            x="-10"
            y="-10"
          >
            <!--base-ecoded magic to tell us how to shift pixels-->
            <feImage
              id="feImg"
              xlink:href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180' viewBox='0 0 100 100'%3E %3Cdefs%3E %3C!-- Red and blue gradients for X/Y displacement --%3E %3ClinearGradient id='redGradient20' x1='1' x2='0' y1='0' y2='0' color-interpolation='sRGB' gradientUnits='objectBoundingBox'%3E %3Cstop offset='0%25' stop-color='rgb(255,0,0)' /%3E %3Cstop offset='100%25' stop-color='rgba(255,0,0,0)' /%3E %3C/linearGradient%3E %3ClinearGradient id='blueGradient20' x1='0' x2='0' y1='1' y2='0' color-interpolation='sRGB' gradientUnits='objectBoundingBox'%3E %3Cstop offset='0%25' stop-color='rgb(0,0,255)' /%3E %3Cstop offset='100%25' stop-color='rgba(0,0,255,0)' /%3E %3C/linearGradient%3E %3CradialGradient id='orthographicGradient' cx='0.5' cy='0.5' r='0.5'%3E %3Cstop offset='0%25' stop-color='white' stop-opacity='0.000' /%3E %3Cstop offset='10%25' stop-color='white' stop-opacity='0.005' /%3E %3Cstop offset='20%25' stop-color='white' stop-opacity='0.020' /%3E %3Cstop offset='30%25' stop-color='white' stop-opacity='0.046' /%3E %3Cstop offset='40%25' stop-color='white' stop-opacity='0.083' /%3E %3Cstop offset='50%25' stop-color='white' stop-opacity='0.134' /%3E %3Cstop offset='60%25' stop-color='white' stop-opacity='0.200' /%3E %3Cstop offset='70%25' stop-color='white' stop-opacity='0.286' /%3E %3Cstop offset='80%25' stop-color='white' stop-opacity='0.400' /%3E %3Cstop offset='90%25' stop-color='white' stop-opacity='0.564' /%3E %3Cstop offset='100%25' stop-color='white' stop-opacity='1.000' /%3E %3C/radialGradient%3E %3C!-- Apply as mask --%3E %3Cmask id='displacementMask'%3E %3Crect width='100' height='100' fill='black' /%3E %3Ccircle cx='50' cy='50' r='50' fill='url(%23orthographicGradient)' /%3E %3C/mask%3E %3C/defs%3E %3C!-- Neutral gray background --%3E %3Crect fill='rgb(127,127,127)' width='100' height='100' /%3E %3Cg mask='url(%23displacementMask)'%3E %3Crect fill='rgb(0,255,0)' width='100' height='100' /%3E %3Crect style='mix-blend-mode: normal' fill='url(%23redGradient20)' width='100' height='100' /%3E %3Crect style='mix-blend-mode: exclusion' fill='url(%23blueGradient20)' width='100' height='100' /%3E %3C/g%3E%3C/svg%3E"
              width="100"
              height="100"
              x="0"
              y="0"
              result="dispMap"
            />
            <feDisplacementMap
              id="scl"
              in="SourceGraphic"
              in2="dispMap"
              scale="37"
              xChannelSelector="R"
              yChannelSelector="B"
            />
          </filter>

          <mask id="globe">
            <circle cx="50" cy="50" r="50" fill="#fff" />
          </mask>
          <radialGradient id="grad">
            <stop offset="33%" stop-color="rgba(0,0,0,0)" />
            <stop offset="66%" stop-color="rgba(0,0,0,0.3)" />
            <stop offset="100%" stop-color="rgba(0,0,0,0.9)" />
          </radialGradient>
          <pattern
            id="earthSurface"
            patternUnits="userSpaceOnUse"
            patternContentUnits="{patternUnits}"
            x="0"
            y="0"
            width="200"
            height="100"
          >
            <animate
              attributeName="x"
              values="-200;0"
              dur="10s"
              repeatCount="indefinite"
            />
            <image
              x="0"
              y="0"
              width="200"
              height="100"
              href="https://upload.wikimedia.org/wikipedia/commons/thumb/2/23/Blue_Marble_2002.png/3840px-Blue_Marble_2002.png"
              preserveAspectRatio="none"
            />
          </pattern>

          <g transform="rotate(23.5, 50, 50)">
            <g
              id="allThatSpins"
              mask="url(#globe)"
              filter="url(#displacementFilter)"
            >
              <g>
                <g id="spinners">
                  <!-- <g
                    id="world"
                    transform="scale(1.5 1.5) translate(-16.67, -16.67)"
                  > -->
                  <g
                    id="world"
                    transform="translate(50,50) scale(1.5) translate(-50,-50)"
                  >
                    <circle
                      width="100"
                      height="100"
                      x="0"
                      y="0"
                      cx="50"
                      cy="50"
                      r="50"
                      fill="url(#earthSurface)"
                    />
                  </g>
                </g>
              </g>
            </g>
            <!-- <circle
              id="edges"
              width="100"
              height="100"
              x="0"
              y="0"
              cx="50"
              cy="50"
              r="50"
              fill="url(#grad)"
            ></circle> -->
          </g>
        </svg>
      </div>
    </div>
  </body>
</html>
